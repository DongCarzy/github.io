(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{386:function(s,t,a){"use strict";a.r(t);var n=a(4),e=function(s){s.options.__data__block__={mermaid_382ee16b:"sequenceDiagram\ntitle: https工作原理\n浏览器 -> 网站: 访问 https 网站\n网站 --\x3e 浏览器: 发送数字证书(内涵服务器公钥)\n浏览器 -> 浏览器: 用预置的CA列表验证证书,有问题提示风险(验证证书是不是权威机构颁发的)\n浏览器 -> 网站: 浏览器生成随机 `对称密钥`, 用公钥加密\n网站 -> 网站: 用私钥解密,断定是不是自己发出去的公钥来加密的\n网站 --\x3e 浏览器: 用对称密钥通信\n浏览器 --\x3e 网站: 用对称密钥通信\n"}},r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"https"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#https"}},[s._v("#")]),s._v(" HTTPS")]),s._v(" "),t("p",[s._v("HTTPS=HTTP over SSL/TLS, 在应用层HTTP与协议层TCP中加了一层  "),t("strong",[s._v("SSL/TLS")]),s._v(" 来保证数据安全性,  默认端口 443")]),s._v(" "),t("h2",{attrs:{id:"_1-ssl-tls"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ssl-tls"}},[s._v("#")]),s._v(" 1. SSL/TLS")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("数据加密")]),s._v(" 来往通信的数据都是加密的")]),s._v(" "),t("li",[t("code",[s._v("完整性校验")]),s._v("  加密的通信数据经过消息完整性校验MAC, 防止篡改")]),s._v(" "),t("li",[t("code",[s._v("身份验证")]),s._v(" TLS握手过程使用的证书是经过权威CA签名的，进行身份验证，防止身份假冒")])]),s._v(" "),t("Mermaid",{attrs:{id:"mermaid_382ee16b",graph:s.$dataBlock.mermaid_382ee16b}}),t("h2",{attrs:{id:"_2-数字证书主要内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-数字证书主要内容"}},[s._v("#")]),s._v(" 2. 数字证书主要内容")]),s._v(" "),t("blockquote",[t("p",[s._v("可通过浏览器, 安全一列去随机查看一个证书")])]),s._v(" "),t("ul",[t("li",[s._v("公钥 public key")]),s._v(" "),t("li",[s._v("ISSUSER 证书颁发机构")]),s._v(" "),t("li",[s._v("Subject 证书持有者")]),s._v(" "),t("li",[s._v("证书有效期")]),s._v(" "),t("li",[s._v("签名算法(hash算法)")]),s._v(" "),t("li",[s._v("指纹  证书的唯一编号,用来保证证书的完整性.CA机构用 "),t("code",[s._v("指纹算法")]),s._v("计算得到的hash值")]),s._v(" "),t("li",[s._v("指纹算法")])]),s._v(" "),t("h2",{attrs:{id:"_3-数字签名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-数字签名"}},[s._v("#")]),s._v(" 3. 数字签名")]),s._v(" "),t("p",[s._v("CA机构将证书的指纹和指纹算法通过自己的私钥加密得到的就是证书的签名")]),s._v(" "),t("h2",{attrs:{id:"_4-自己制作证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-自己制作证书"}},[s._v("#")]),s._v(" 4. 自己制作证书")]),s._v(" "),t("blockquote",[t("ol",[t("li",[s._v("准备工具 openssl")]),s._v(" "),t("li",[s._v("证书相关的文件: PKCS标准")])])]),s._v(" "),t("ul",[t("li",[s._v(".key  私钥文件, 通常采用 rsa 算法,自己保存, 不用给 CA机构")]),s._v(" "),t("li",[s._v(".csr   证书签名请求文件, 包含了公钥信息, 用自己的私钥去生成")]),s._v(" "),t("li",[s._v(".crt   CA认证后的证书文件")]),s._v(" "),t("li",[s._v(".crl    证书吊销列表")]),s._v(" "),t("li",[s._v(".pem  用于导出,导入证书.(.crt与.key合体), windows下是 .pfx 格式.")])]),s._v(" "),t("p",[s._v("将会生成三个最重要的文件 "),t("code",[s._v("ca_dxp.crt")]),s._v(" , "),t("code",[s._v("dxp.crt")]),s._v(" 和 "),t("code",[s._v("dxp.key")])]),s._v(" "),t("h3",{attrs:{id:"_4-1-生成自签根证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-生成自签根证书"}},[s._v("#")]),s._v(" 4.1 生成自签根证书")]),s._v(" "),t("blockquote",[t("p",[s._v("整个过程本人是在windows 环境下操作的")])]),s._v(" "),t("h4",{attrs:{id:"_4-1-1-主备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-主备工作"}},[s._v("#")]),s._v(" 4.1.1 主备工作")]),s._v(" "),t("ol",[t("li",[s._v("安装openssl, 如果安装了git会自动安装的")]),s._v(" "),t("li",[s._v("配置环境变量 "),t("code",[s._v("openssl_conf")]),s._v(" 指向 ssl 下的  openssl.cnf, 不想配置的可以直接在windows 命令行用  "),t("code",[s._v("set openssl_conf=xxxx\\opensll.cnf")]),s._v(" 也行")])]),s._v(" "),t("h4",{attrs:{id:"_4-1-2-开始生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-开始生成"}},[s._v("#")]),s._v(" 4.1.2 开始生成")]),s._v(" "),t("p",[s._v("生成CA私钥(.key)  ->  生成证书(.csr)   ->  自签名得到得根证书 (.crt)")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 生成 CA 私钥, 不用密码,强度2048\nopenssl genrsa -out ca_dxp.key 2048\n\n# CA CSR\nopenssl req -new -key ca_dxp.key -out ca_dxp.csr\n\n# 根证书, 最终浏览器中需要将这个导入到根证书\nopenssl x509 -req -days 3650 -in ca_dxp.csr -signkey ca_dxp.key -out ca_dxp.crt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("根证书是自己给自己签名(自己就是那个权威机构)")]),s._v(" "),t("h3",{attrs:{id:"_4-2-根证书签名生成用户证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-根证书签名生成用户证书"}},[s._v("#")]),s._v(" 4.2 根证书签名生成用户证书")]),s._v(" "),t("h4",{attrs:{id:"_4-2-1-主备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-主备工作"}},[s._v("#")]),s._v(" 4.2.1 主备工作")]),s._v(" "),t("ol",[t("li",[s._v("环境同 4.1.1")]),s._v(" "),t("li",[s._v("需要在生成证书的文件夹下新增目录(执行 "),t("code",[s._v("openssl ca")]),s._v(" 时发现的错误)\n1.\n2. demoCA/newcerts\n3. 在 "),t("code",[s._v("demoCA")]),s._v(" 下新建空白文件 "),t("code",[s._v("index.txt")]),s._v("\n4. 在 "),t("code",[s._v("demoCA")]),s._v(" 下新建空白文件 "),t("code",[s._v("serial")]),s._v(", 输入 "),t("code",[s._v("01")]),s._v(" 和一个"),t("code",[s._v("换行符")]),s._v(" 即可\n5. 在生成 csr 时,填入的信息需要和 ca.csr一致, 不然生成 "),t("code",[s._v("openssl ca")]),s._v(" 会失败,并给出不同点的提示")])]),s._v(" "),t("h4",{attrs:{id:"_4-2-2开始生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2开始生成"}},[s._v("#")]),s._v(" 4.2.2开始生成")]),s._v(" "),t("p",[s._v("生成私钥（"),t("em",[s._v(".key")]),s._v("）--\x3e生成证书请求（"),t("em",[s._v(".csr")]),s._v("）--\x3e用CA根证书签名得到证书（"),t("em",[s._v(".crt")]),s._v(")")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 私钥, 密码 123456\nopenssl genrsa -des3 -passout pass:123456 -out dxp.key 1024 \n\n# csr\nopenssl req -new -key dxp.key -passin pass:123456 -out dxp.csr\n\n# 证书\nopenssl ca -in dxp.csr -out dxp.crt -cert ca_dxp.crt -keyfile ca_dxp.key\n\n# 导出证书, 填入自己需要的密码,可以不填, 我填的 111222\nopenssl pkcs12 -export -inkey dxp.key -passin pass:123456 -in dxp.crt -out dxp_pkcs12.pfx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("证书需要用要CA的 csr 和 key")]),s._v(" "),t("h2",{attrs:{id:"_5-配置证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-配置证书"}},[s._v("#")]),s._v(" 5. 配置证书")]),s._v(" "),t("blockquote",[t("p",[s._v("需要先将 "),t("code",[s._v("ca_dxp.crt")]),s._v(" 导入到浏览器的根证书中心, 这里授权的时10年")])]),s._v(" "),t("h3",{attrs:{id:"_5-1-springboot-中使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-springboot-中使用"}},[s._v("#")]),s._v(" 5.1 springboot 中使用")]),s._v(" "),t("p",[s._v("将 "),t("code",[s._v("dxp_pkcs12.pfx")]),s._v(" 复制到自己 "),t("code",[s._v("resources")]),s._v(" 下,  在配置文件添加上即可")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssl")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server.ssl.key-store")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("classpath:dxp_pkcs12.pfx")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server.ssl.key-store-password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("111222")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server.ssl.key-store-type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("pkcs12")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_5-2-nginx-中使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-nginx-中使用"}},[s._v("#")]),s._v(" 5.2 nginx 中使用")]),s._v(" "),t("p",[s._v("nginx 中不允许使用 带有密码的私钥,所以需要解密 "),t("code",[s._v("dxp.key")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("openssl rsa "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-in")]),s._v(" dxp.key "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-passin")]),s._v(" pass:123456 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-out")]),s._v(" dxp_nopass.key\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("nginx.conf 配置如下")]),s._v(" "),t("div",{staticClass:"language-nginx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-nginx"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1443")]),s._v(" ssl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v("  localhost")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# conf 下的可以用证书文件相对路径")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate")]),s._v("      ssl/dxp.crt")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# conf 下的可以用证书文件相对路径")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate_key")]),s._v("  ssl/dxp_nopass.key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_session_cache")]),s._v("    shared:SSL:10m")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_session_timeout")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15m")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_ciphers")]),s._v("  HIGH:!aNULL:!MD5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_prefer_server_ciphers")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("on")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" /")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v("   html")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v("  index.html index.htm")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[s._v("访问 https://127.0.0.1:1443即可")]),s._v(" "),t("h3",{attrs:{id:"_5-3-node-express中使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-node-express中使用"}},[s._v("#")]),s._v(" 5.3 node_express中使用")]),s._v(" "),t("p",[s._v("和nginx差不多,需要用 "),t("code",[s._v("dxp.key")]),s._v(" 和 "),t("code",[s._v("dxp.crt")]),s._v(", 不同的是,可以配置密码")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" app "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'express'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" fs "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fs'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" https "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" keyPath "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dxp.key'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" crtPath "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dxp.crt'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" privateKey  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" fs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("readFileSync")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("keyPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" certificate "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" fs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("readFileSync")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("crtPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" httpsServer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createServer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" privateKey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("cert")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" certificate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("passphrase")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SSLPORT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18081")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nhttpsServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("listen")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SSLPORT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HTTPS Server is running on: https://localhost:%s'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SSLPORT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Welcome")]),s._v("\napp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Welcome to Safety Land!'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("p",[s._v("浏览器访问 "),t("code",[s._v("https://localhost:18081")])])],1)}),[],!1,null,null,null);"function"==typeof e&&e(r);t.default=r.exports}}]);